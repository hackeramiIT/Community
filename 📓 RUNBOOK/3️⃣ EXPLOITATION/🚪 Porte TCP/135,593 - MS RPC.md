#Exploitation_porte

---
---
---
#### INDICE

- [[#Introduzione]]
- [[#Enumerazione RPC]]
- [[#Dump delle Share e Info]]
- [[#Enumerazione Utenti e Gruppi]]

---
---
---
### Introduzione
*MSRPC (Microsoft RPC)* è un’implementazione del protocollo DCE/RPC utilizzata nei sistemi Windows per esporre una vasta gamma di servizi di rete (es. SAMR, LSA, SPOOLSS, WMI, DCOM).  
Opera sulla porta TCP/135 come portmapper, che fornisce l’elenco delle porte dinamiche (ephemeral) usate dagli altri servizi RPC.

---
### Enumerazione RPC
Può essere effettuata tramite:

```
rpcclient -U "" target-ip
```

```
nmap -p 135 --script=rpcinfo target-ip
```

---
### Dump delle Share e Info

Con `rpcclient`, è possibile ottenere informazioni sulle condivisioni:

```
rpcclient $> netshareenum rpcclient $> srvinfo
```

```
smbclient -L //target-ip -U guest
```

---
### Enumerazione Utenti e Gruppi
Accesso a SAMR tramite `rpcclient`:

```
rpcclient $> enumdomusers rpcclient $> queryuser 0xRID rpcclient $> enumdomgroups
```

```
cme smb target-ip -u '' -p '' --users
```