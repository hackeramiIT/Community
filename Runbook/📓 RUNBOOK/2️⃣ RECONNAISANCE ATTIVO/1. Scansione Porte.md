#Recoinnaisance_attivo

---
#### INDICE

- [[#Introduzione]]
- [[#Enumerazione TCP]]
- [[#Enumerazione UDP]]

---
---
---
### Introduzione
La **scansione delle porte** √® una tecnica di ricognizione attiva che consiste nell'inviare pacchetti a un host target per determinare **quali porte di rete sono aperte ed in ascolto** su quelle porte e talvolta raccogliere informazioni sul software e versione in esecuzione.  √à uno dei primi passi fondamentali in un penetration test, poich√© fornisce la mappa della superficie d‚Äôattacco esposta.

Durante questa fase √® necessario identificare[[üî° Glossario#porte TCP:| porte TCP¬∞]] e[[üî° Glossario#UDP (User Datagram Protocol)| porte UDP¬∞]]. Inoltre, va fatto un ulteriore distinguo per [[üî° Glossario#Porta aperta| porte aperte¬∞]],[[üî° Glossario#Porta chiusa| porte chiuse¬∞]] e[[üî° Glossario#Porta filtrata| porte filtrate¬∞]]; terremo in maggior considerazione le prime.

---
### Enumerazione TCP
Per lo scansionamento delle porte TCP utilizziamo i seguenti comandi:

```
nmap IP_TARGET -p- --open -sCV -A -O #Scansiona tutte le porte ed approfondisce quelle aperte
```

Dall'output possiamo dedurre informazioni utili come:
- *Sistema operativo*, utile in seguito per far eseguire in applicativi al target (es:[[üî° Glossario#Reverse shell| reverse shell¬∞]]).
- *Nome di dominio*, in tal caso aggiungerlo al file `/etc/hosts` per forzare la risoluzione DNS.
- *Servizi* in uso e le loro versioni, delle volte associate a[[üî° Glossario#CVE| vulnerabilit√† note¬∞]].

Di seguito sono riportati le porte pi√π note e le metodologie di attacco per ognuno di essi:

|     **Porta**      |            **Servizio**             |
| :----------------: | :---------------------------------: |
|       **21**       |         [[21 - FTP \| FTP]]         |
|       **22**       |         [[22 - SSH \| SSH]]         |
|       **25**       |        [[25 - SMTP \| SMTP]]        |
|       **53**       |         [[53 - DNS \| DNS]]         |
|       **80**       |      [[80,443 - HTTP \| HTTP]]      |
|      **110**       |       [[110 - POP3 \| POP3]]        |
|    **135,593**     |    [[135,593 - MS RPC\| MS RPC]]    |
|    **139,445**     |       [[139,445 - SMB\| SMB]]       |
|      **443**       |     [[80,443 - HTTP \| HTTPS]]      |
|      **3306**      |      [[3306 - MySQL \| MySQL]]      |
|      **3389**      |        [[3389 - RDP \| RDP]]        |
|      **5432**      | [[5432 - PostgreSQL \| PostgreSQL]] |
| **5900,5901,5902** |   [[5900,5901,5902 - VNC\| VNC]]    |
|   **5985/5986**    |   [[5985,5986 - WinRM \| WinRM]]    |
|      **6379**      |      [[6379 - Redis \| Redis]]      |

> [!warning]
> La corrispondenza tra porta e servizio pu√≤ variare in base alla configurazione.

---
### Enumerazione UDP
Per lo scansionamento delle porte **UDP**, utilizziamo comandi pi√π lenti e meno affidabili rispetto al TCP, ma fondamentali per rilevare **servizi non visibili in una scansione standard**.

```
nmap -sU --top-ports 100 -T4 IP_TARGET # Scansione delle 100 porte UDP pi√π comuni
```

```
nmap -sU -p 53,67,69,123,161,500,514 IP_TARGET # Scansione selettiva delle porte UDP
```

